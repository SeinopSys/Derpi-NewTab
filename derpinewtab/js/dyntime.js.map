{"version":3,"sources":["dyntime.js"],"names":["$","timePad","i","isNaN","parseInt","Math","abs","toString","months","order","weekdays","weekday","dateformat","year","date","ret","rem","mi","snLnObj","wd","m","y","s","h","d","mo","timeparts","key","num","postdate","month","getDay","getHours","keys","indexOf","getDate","getFullYear","getMonth","attr","getMinutes","now","Object","splice","timestr","l","length","replace","RegExp","this","obj","returnStr","_typeof","time","update","window","updateTimesF","apply","arguments","noAutoUpdateTimes","updateTimes","week","day","hour","minute","second","createTimeStr","difference","floor","timeDifference","Date","setInterval","jQuery"],"mappings":"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","file":"dyntime.js","sourcesContent":["(function($){\r\n\t'use strict';\r\n\tvar timePad = function(i){if(!isNaN(i)){i=parseInt(i);if (i<10&&i>=0)i='0'+i;else if(i<0)i='-0'+Math.abs(i);else i=i.toString()}return i};\r\n\tvar months = [\r\n\t\t\"January\", \r\n\t\t\"February\",\r\n\t\t\"March\",\r\n\t\t\"April\",\r\n\t\t\"May\",\r\n\t\t\"June\",\r\n\t\t\"July\",\r\n\t\t\"August\",\r\n\t\t\"September\",\r\n\t\t\"October\",\r\n\t\t\"November\",\r\n\t\t\"December\"\r\n\t];\r\n\tvar weekdays = [\r\n\t\t\"Sunday\",\r\n\t\t\"Monday\",\r\n\t\t\"Tuesday\",\r\n\t\t\"Wednesday\",\r\n\t\t\"Thursday\",\r\n\t\t\"Friday\",\r\n\t\t\"Saturday\",\r\n\t];\r\n\tvar dateformat = {\r\n\t\torder: '{{wd}}, {{d}} {{mo}}, {{y}}. {{h}}:{{mi}}',\r\n\t\tday: function(date){\r\n\t\t\tvar ret = date, rem = date % 10;\r\n\t\t\tif (date !== 11 && rem === 1) ret += 'st';\r\n\t\t\telse if (date !== 12 && rem === 2) ret += 'nd';\r\n\t\t\telse if (date !== 13 && rem === 3) ret += 'rd';\r\n\t\t\telse ret += 'th';\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\tweekday: function(wd){ return weekdays[parseInt(wd)] },\r\n\t\tmonth: function(m){ return months[parseInt(m)-1] },\r\n\t\tyear: function(y){ return y },\r\n\t};\r\n\tvar snLnObj = {\r\n\t\ts:'second',\r\n\t\tmi:'minute',\r\n\t\th:'hour',\r\n\t\td:'day',\r\n\t\tw:'week',\r\n\t\tmo:'month',\r\n\t\ty:'year',\r\n\t};\r\n\tvar timeparts = function(key, num){\r\n\t\tif (typeof snLnObj[key] !== 'undefined')\r\n\t\t\treturn num+' '+snLnObj[key]+(num > 1 ? 's' : '');\r\n\t};\r\n\tvar update = function(){\r\n\t\t$('time').each(function(){\r\n\t\t\tvar date = $(this).attr('datetime');\r\n\t\t\tif (typeof date !== 'string') return true;\r\n\t\t\tvar postdate = new Date(date);\r\n\t\t\t\r\n\t\t\tif (isNaN(postdate.getTime())) return true;\r\n\t\t\t\r\n\t\t\tdate = {\r\n\t\t\t\td: dateformat.day(postdate.getDate()),\r\n\t\t\t\ty: dateformat.year(postdate.getFullYear()),\r\n\t\t\t\tmo: dateformat.month(postdate.getMonth()+1),\r\n\t\t\t\twd: dateformat.weekday(postdate.getDay()),\r\n\t\t\t\th: timePad(postdate.getHours()),\r\n\t\t\t\tmi: timePad(postdate.getMinutes()),\r\n\t\t\t\torder: dateformat.order,\r\n\t\t\t};\r\n\t\t\tvar keys = Object.keys(date);\r\n\t\t\tkeys.splice(keys.indexOf('order'),1);\r\n\t\t\t\r\n\t\t\tfor (var i=0,l=keys.length; i<l; i++) date.order = date.order.replace(new RegExp('\\{\\{'+keys[i]+'\\}\\}'),date[keys[i]]);\r\n\t\t\t\r\n\t\t\t$(this).attr( 'title', date.order );\r\n\r\n\t\t\tvar now = new Date();\r\n\t\t\tvar timestr = createTimeStr(timeDifference(now,postdate));\r\n\t\t\t\r\n\t\t\t$(this).html(timestr);\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t\tTime differenec function (modified)\r\n\t\tsource: http://psoug.org/snippet/Javascript-Calculate-time-difference-between-two-dates_116.htm\r\n\t\t\r\n\t\tI did not create this function entirely by myself, and I'm taking no credit for the parts I didn't write.\r\n\t**/\r\n\tfunction timeDifference(now,earlierdate) {\r\n\t\tvar difference = {\r\n\t\t\ttime: now.getTime() - earlierdate.getTime()\r\n\t\t};\r\n\t\t\r\n\t\tdifference.day = Math.floor(difference.time/1000/60/60/24);\r\n\t\tdifference.time -= difference.day*1000*60*60*24;\r\n\t\t\r\n\t\tdifference.hour = Math.floor(difference.time/1000/60/60);\r\n\t\tdifference.time -= difference.hour*1000*60*60;\r\n\t\t\r\n\t\tdifference.minute = Math.floor(difference.time/1000/60);\r\n\t\tdifference.time -= difference.minute*1000*60;\r\n\t\t\r\n\t\tdifference.second = Math.floor(difference.time/1000);\r\n\t\t\r\n\t\tif (difference.day >= 7){\r\n\t\t\tdifference.week = parseInt(difference.day/7);\r\n\t\t\tdifference.day -= difference.week*7;\r\n\t\t}\r\n\t\tif (difference.week >= 4){\r\n\t\t\tdifference.month = parseInt(difference.week/4);\r\n\t\t\tdifference.week -= difference.month*4;\r\n\t\t}\r\n\t\tif (difference.month >= 12){\r\n\t\t\tdifference.year = parseInt(difference.month/12);\r\n\t\t\tdifference.month -= difference.year*12;\r\n\t\t}\r\n\t\t\r\n\t\treturn difference;\r\n\t}\r\n\tfunction createTimeStr(obj){\r\n\t\tif (typeof obj !== 'object' || $.isArray(obj)) return false;\r\n\t\tif (obj.time > 0) delete obj.time;\r\n\t\t\r\n\t\tvar keys = Object.keys(obj), returnStr = '';\r\n\t\tfor (var i=0,l=keys.length; i<l; i++) if (keys[i] !== 'second' && obj[keys[i]] < 1) delete obj[keys[i]];\r\n\t\t\r\n\t\tif (obj.year > 0) returnStr = timeparts('y',obj.year);\r\n\t\telse if (obj.month > 0) returnStr = timeparts('mo',obj.month);\r\n\t\telse if (obj.week > 0) returnStr = timeparts('w',obj.week);\r\n\t\telse if (obj.day > 0) returnStr = timeparts('d',obj.day);\r\n\t\telse if (obj.hour > 0) returnStr = timeparts('h',obj.hour);\r\n\t\telse if (obj.minute > 0) returnStr = timeparts('mi',obj.minute);\r\n\t\telse if (obj.second > 0) returnStr = timeparts('s',obj.second);\r\n\t\t\r\n\t\treturn (returnStr+' ago').replace(/^\\sago$/,'just now');\r\n\t}\r\n\tupdate();\r\n\twindow.updateTimesF = function(){\r\n\t\tupdate.apply(update,arguments);\r\n\t};\r\n\tif (window.noAutoUpdateTimes !== true)\r\n\t\twindow.updateTimes = setInterval(update,10000);\r\n})(jQuery);\r\n"]}